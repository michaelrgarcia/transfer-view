/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(e,t,n){const r=document.createElement("option");return r.textContent=e,r.value=e,t&&n&&r.setAttribute(`data-${n}`,t),r}function n(e){const t=document.createElement("option");return t.textContent=`Select a ${e}`,t.value="",t.disabled=!0,t.selected=!0,t}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!t||!/^http(s?):/.test(t));)t=r[o--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p,e.p,e.p,e.p,e.p;const r=e=>{const t=(e=e.trim()).match("[0-9.]+");let n,r="ms";const o=t?t[0]:"";return o&&(r=e.split(o)[1],n=Number(o)),{num:n,unit:r}},o=function(e){const t=function(e){const t=t=>{return window.getComputedStyle(e).getPropertyValue(t)||e.style[(n=t,n.replace(/-([a-z])/g,(e=>e[1].toUpperCase())))];var n},n=t("transition-delay")||"0ms",o=t("transition-duration")||"0ms",c=Array.isArray(o)?o:[o],s=Array.isArray(n)?n:[n];let a,i=0;return c.push.apply(c,s),c.forEach((e=>{e.split(",").forEach((e=>{e=(e=>{const t=r(e),n=t?t.num:void 0;if(!n)return"";let o=n;return"s"===e.replace(n+"","")&&(o=1e3*n),o+"ms"})(e),a=r(e),a.num&&a.num>i&&(i=a.num)}))})),i}(e);return new Promise((n=>{t>0?setTimeout((()=>{n(e)}),t):n(e)}))},c=document.querySelector("dialog"),s=document.querySelector("form");function a(e){const t=e,n=t.querySelector("select"),r=t.querySelectorAll(":not(.loading)");n&&(n.disabled=!0),r.forEach((e=>{e.setAttribute("aria-disabled","true")}))}function i(e){const t=e,n=t.querySelector("select"),r=t.querySelectorAll(":not(.loading)");n&&(n.disabled=!1),r.forEach((e=>{e.setAttribute("aria-disabled","false")}))}function l(e,t){a(e),function(e){const t=e;t.style.opacity=1,t.style.display="block"}(t)}function d(e,t){i(e),function(e){const t=e;t.style.opacity=0,t.style.display="none"}(t)}const u=sessionStorage.getItem("requestInProgress"),p=[document.getElementById("four-year"),document.getElementById("major"),document.getElementById("class")],y=p[0],f=p[1],m=p[2],h=(document.querySelector("form"),document.querySelector(".submit")),g=document.querySelector("dialog"),E=document.querySelector(".close-dialog");document.addEventListener("DOMContentLoaded",(()=>{for(let e=1;e<p.length;)p[e].parentNode&&(a(p[e].parentNode),e+=1);a(h.parentNode),async function(e){const r=e.parentNode,o=r.querySelector(".loading");c.showModal(),c.style.opacity=1,l(r,o);const s=await async function(){try{const e="https://classglance.onrender.com/schools/four-years",t=await fetch(e),n=await t.json();return Object.values(n)}catch(e){return console.error("Error fetching universities:",e),null}}(),a=e,i=n("school");a.appendChild(i),s.forEach((e=>{if(e.id<200){const n=t(e.name,e.id,"sending");a.appendChild(n)}})),c.style.opacity=0,c.close(),d(r,o)}(p[0])})),p[0].addEventListener("input",(()=>{const e=y.options[y.selectedIndex].dataset.sending;(async function(e,r){const o=e.parentElement,c=o.querySelector(".loading");l(o,c);const s=await async function(e){try{const t=`https://classglance.onrender.com/schools/major-data/${e}/74`,n=await fetch(t),r=await n.json();return Object.values(r)}catch(t){return console.error(`Error fetching majors for ${e}:`,t),null}}(r),a=e,i=n("major");a.replaceChildren(),a.appendChild(i),s.forEach((e=>{const n=t(e.major,e.key,"key");a.appendChild(n)})),d(o,c)})(f,e),f.replaceChildren(),m.replaceChildren(),a(m.parentNode),a(h.parentNode)})),p[1].addEventListener("input",(()=>{const e=y.options[y.selectedIndex].dataset.sending,r=f.options[f.selectedIndex],{key:o}=r.dataset;m.replaceChildren(),async function(e,r,o){const c=e.parentNode,s=c.querySelector(".loading");l(c,s);const a=await async function(e,t){try{const n=`https://classglance.onrender.com/schools/74/6/${e}/${t}/lower-divs`,r=await fetch(n),o=await r.json();return Object.values(o)}catch(t){return console.error(`Error fetching lower divs for ${e}:`,t),null}}(r,o),i=e,u=n("class");i.replaceChildren(),i.appendChild(u),a.forEach((e=>{if(Array.isArray(e)){let n,r="";e.forEach(((t,o)=>{if("string"==typeof t&&(n=t.toLowerCase(),o<e.length-1&&(r+=` ${n} `)),t.prefix&&t.courseNumber&&t.courseTitle){const{prefix:e}=t,{courseNumber:n}=t;r+=` ${e} ${n} `}}));const o=t(r);i.appendChild(o)}else{const n=t(`${e.prefix} ${e.courseNumber} - ${e.courseTitle}`,null,null);i.appendChild(n)}})),d(c,s)}(m,e,o),a(h.parentNode)})),p[2].addEventListener("input",(()=>{!1===u&&i(h.parentNode)})),h.addEventListener("click",(async e=>{y.options[y.selectedIndex].dataset.sending,f.options[f.selectedIndex].dataset.key,m.value&&!u&&(a(h.parentNode),s.style.opacity=0,o(s).then((()=>{s.style.display="none"}))),e.preventDefault()})),E.addEventListener("click",(()=>{g.close()}))})();