(()=>{"use strict";var e={};e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var o=n.getElementsByTagName("script");if(o.length)for(var r=o.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=o[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t})(),e.p,e.p,e.p,e.p,e.p;const t=e=>{const t=(e=e.trim()).match("[0-9.]+");let n,o="ms";const r=t?t[0]:"";return r&&(o=e.split(r)[1],n=Number(r)),{num:n,unit:o}},n=function(e){const n=function(e){const n=t=>{return window.getComputedStyle(e).getPropertyValue(t)||e.style[(n=t,n.replace(/-([a-z])/g,(e=>e[1].toUpperCase())))];var n},o=n("transition-delay")||"0ms",r=n("transition-duration")||"0ms",s=Array.isArray(r)?r:[r],a=Array.isArray(o)?o:[o];let c,i=0;return s.push.apply(s,a),s.forEach((e=>{e.split(",").forEach((e=>{e=(e=>{const n=t(e),o=n?n.num:void 0;if(!o)return"";let r=o;return"s"===e.replace(o+"","")&&(r=1e3*o),r+"ms"})(e),c=t(e),c.num&&c.num>i&&(i=c.num)}))})),i}(e);return new Promise((t=>{n>0?setTimeout((()=>{t(e)}),n):t(e)}))},o=document.querySelector("dialog"),r=document.querySelector("form");function s(e){const t=e,n=t.querySelector("select"),o=t.querySelectorAll(":not(.loading)");n&&(n.disabled=!0),o.forEach((e=>{e.setAttribute("aria-disabled","true")}))}function a(e){const t=e,n=t.querySelector("select"),o=t.querySelectorAll(":not(.loading)");n&&(n.disabled=!1),o.forEach((e=>{e.setAttribute("aria-disabled","false")}))}function c(e,t){s(e),function(e){const t=e;t.style.opacity=1,t.style.display="block"}(t)}function i(e,t){a(e),function(e){const t=e;t.style.opacity=0,t.style.display="none"}(t)}async function l(e,t,n){if(0!==e.length){const o=e.splice(0,7);try{const r=await async function(e,t){const n=JSON.stringify(e),o=await fetch("https://assistscraper.onrender.com/articulation-data",{body:n,method:"POST",headers:{"Content-Type":"application/json"},signal:t});if(!o.ok)throw new Error("api is not ok");const r=await o.json();return Object.values(r)}(o,n);t.push(...r),console.log("processed request"),await l(e,t,n)}catch(e){"AbortError"===e.name?console.log("aborted request"):console.error("error processing request:",e)}}}async function u(e){const t=[],n=e.slice(),o=new AbortController,{signal:r}=o;window.addEventListener("beforeunload",(()=>o.abort())),await async function(){const e=document.querySelector("img.loading-gif");e.style.display="block";const t=await fetch("https://api.giphy.com/v1/gifs/translate?api_key=uldN0xaiyhNfeuN7QN98ROsslA7JpaDG&s=loading",{mode:"cors"}),n=await t.json();try{n&&(e.src=n.data.images.original.url)}catch(e){console.log(e)}}();const s=Array.from({length:1},(()=>l(n,t,r)));try{await Promise.all(s),function(){const e=document.querySelector("img.loading-gif");e.style.opacity=0,e.style.display="none",e.src="#"}(),console.log("all requests processed")}catch(e){"AbortError"===e.name?console.log("requests aborted due to page unload"):console.error("error processing requests",e)}finally{window.removeEventListener("beforeunload",(()=>o.abort()))}return console.log(t),t}function d(e,t,n){const o=document.createElement("option");return o.textContent=e,o.value=e,t&&n&&o.setAttribute(`data-${n}`,t),o}function p(e){const t=document.createElement("option");return t.textContent=`Select a ${e}`,t.value="",t.disabled=!0,t.selected=!0,t}const y=[document.getElementById("four-year"),document.getElementById("major"),document.getElementById("class")],f=y[0],h=y[1],m=y[2],g=(document.querySelector("form"),document.querySelector(".submit")),w=document.querySelector("dialog"),b=document.querySelector(".close-dialog");document.addEventListener("DOMContentLoaded",(()=>{for(let e=1;e<y.length;)y[e].parentNode&&(s(y[e].parentNode),e+=1);s(g.parentNode),async function(e){const t=e.parentNode,n=t.querySelector(".loading");o.showModal(),o.style.opacity=1,c(t,n);const r=await async function(){try{const e="https://classglance.onrender.com/schools/four-years",t=await fetch(e),n=await t.json();return Object.values(n)}catch(e){return console.error("Error fetching universities:",e),null}}(),s=e,a=p("school");s.appendChild(a),r.forEach((e=>{if(e.id<200){const t=d(e.name,e.id,"sending");s.appendChild(t)}})),o.style.opacity=0,o.close(),i(t,n)}(y[0])})),y[0].addEventListener("input",(()=>{const e=f.options[f.selectedIndex].dataset.sending;(async function(e,t){const n=e.parentElement,o=n.querySelector(".loading");c(n,o);const r=await async function(e){try{const t=`https://classglance.onrender.com/schools/major-data/${e}/74`,n=await fetch(t),o=await n.json();return Object.values(o)}catch(t){return console.error(`Error fetching majors for ${e}:`,t),null}}(t),s=e,a=p("major");s.replaceChildren(),s.appendChild(a),r.forEach((e=>{const t=d(e.major,e.key,"key");s.appendChild(t)})),i(n,o)})(h,e),h.replaceChildren(),m.replaceChildren(),s(m.parentNode),s(g.parentNode)})),y[1].addEventListener("input",(()=>{const e=f.options[f.selectedIndex].dataset.sending,t=h.options[h.selectedIndex],{key:n}=t.dataset;m.replaceChildren(),async function(e,t,n){const o=e.parentNode,r=o.querySelector(".loading");c(o,r);const s=await async function(e,t){try{const n=`https://classglance.onrender.com/schools/74/6/${e}/${t}/lower-divs`,o=await fetch(n),r=await o.json();return Object.values(r)}catch(t){return console.error(`Error fetching lower divs for ${e}:`,t),null}}(t,n),a=e,l=p("class");a.replaceChildren(),a.appendChild(l),s.forEach((e=>{if(Array.isArray(e)){let t,n="";e.forEach(((o,r)=>{if("string"==typeof o&&(t=o.toLowerCase(),r<e.length-1&&(n+=` ${t} `)),o.prefix&&o.courseNumber&&o.courseTitle){const{prefix:e}=o,{courseNumber:t}=o;n+=` ${e} ${t} `}}));const o=d(n);a.appendChild(o)}else{const t=d(`${e.prefix} ${e.courseNumber} - ${e.courseTitle}`,null,null);a.appendChild(t)}})),i(o,r)}(m,e,n),s(g.parentNode)})),y[2].addEventListener("input",(()=>{a(g.parentNode)})),g.addEventListener("click",(async e=>{const t=f.options[f.selectedIndex].dataset.sending,o=h.options[h.selectedIndex].dataset.key;if(s(g.parentNode),m.value){const e=await async function(e,t){const n=[],o=await async function(){try{const e="https://classglance.onrender.com/schools/community-colleges",t=await fetch(e),n=await t.json();return Object.values(n)}catch(e){return console.error("Error fetching community colleges:",e),null}}(),r=e,s=t;return o.forEach((e=>{if(e.id){const t=`https://assist.org/api/articulation/Agreements?Key=74/${e.id}/to/${r}/Major/${s}`;n.push({link:t})}})),n}(t,o);r.style.opacity=0,n(r).then((()=>{r.style.display="none"})),await u(e)}e.preventDefault()})),b.addEventListener("click",(()=>{w.close()}))})();